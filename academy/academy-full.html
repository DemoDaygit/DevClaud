<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Decentralized AI Academy - –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è –æ–±—É—á–∞—é—â–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        :root {
            --primary: #667eea;
            --secondary: #764ba2;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --bg-dark: #0f172a;
            --bg-card: #1e293b;
            --bg-lighter: #334155;
            --text-primary: #f8fafc;
            --text-secondary: #cbd5e1;
            --border: #475569;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg-dark);
            color: var(--text-primary);
            line-height: 1.6;
        }

        /* Header */
        header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            padding: 20px 0;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        h1 {
            font-size: 1.8rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .controls {
            display: flex;
            gap: 15px;
        }

        .btn {
            padding: 8px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s;
            background: rgba(255,255,255,0.2);
            color: white;
        }

        .btn:hover {
            background: rgba(255,255,255,0.3);
            transform: translateY(-2px);
        }

        /* Main Layout */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 30px 20px;
        }

        /* Tabs */
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            border-bottom: 2px solid var(--border);
        }

        .tab {
            padding: 12px 24px;
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 1.1rem;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
        }

        .tab.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }

        .tab:hover {
            color: var(--text-primary);
        }

        /* Tab Content */
        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Knowledge Graph */
        #knowledge-graph {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 20px;
            height: 600px;
            position: relative;
            border: 1px solid var(--border);
        }

        #graph-svg {
            width: 100%;
            height: 100%;
            cursor: grab;
        }

        #graph-svg:active {
            cursor: grabbing;
        }

        /* Learning Paths */
        .paths-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .path-card {
            background: linear-gradient(135deg, var(--bg-card) 0%, var(--bg-lighter) 100%);
            padding: 24px;
            border-radius: 16px;
            border: 1px solid var(--border);
            transition: all 0.3s;
            cursor: pointer;
        }

        .path-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 16px rgba(102, 126, 234, 0.3);
        }

        .path-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 15px;
        }

        .path-icon {
            font-size: 2.5rem;
        }

        .path-difficulty {
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .difficulty-beginner { background: var(--success); color: white; }
        .difficulty-intermediate { background: var(--warning); color: white; }
        .difficulty-advanced { background: var(--danger); color: white; }

        .path-title {
            font-size: 1.5rem;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .path-desc {
            color: var(--text-secondary);
            margin-bottom: 20px;
        }

        .path-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 15px;
            border-top: 1px solid var(--border);
        }

        .path-progress {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: var(--bg-darker);
            border-radius: 4px;
            overflow: hidden;
            margin-top: 10px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            transition: width 0.5s;
        }

        /* Lessons Grid */
        .lessons-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }

        .lesson-card {
            background: var(--bg-card);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid var(--border);
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .lesson-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: linear-gradient(180deg, var(--primary), var(--secondary));
        }

        .lesson-card:hover {
            transform: translateX(4px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }

        .lesson-card.completed {
            opacity: 0.7;
            border-color: var(--success);
        }

        .lesson-card.completed::after {
            content: '‚úì';
            position: absolute;
            top: 15px;
            right: 15px;
            background: var(--success);
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .lesson-number {
            display: inline-block;
            background: var(--primary);
            color: white;
            padding: 4px 12px;
            border-radius: 8px;
            font-size: 0.85rem;
            margin-bottom: 10px;
        }

        .lesson-title {
            font-size: 1.2rem;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .lesson-desc {
            color: var(--text-secondary);
            font-size: 0.95rem;
            margin-bottom: 15px;
        }

        .lesson-meta {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .meta-badge {
            padding: 4px 10px;
            border-radius: 6px;
            font-size: 0.85rem;
            background: var(--bg-lighter);
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 1000;
            overflow-y: auto;
        }

        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .modal-content {
            background: var(--bg-card);
            max-width: 900px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            border-radius: 16px;
            padding: 40px;
            position: relative;
        }

        .close-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            background: var(--bg-lighter);
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            font-size: 24px;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.3s;
        }

        .close-btn:hover {
            background: var(--danger);
            color: white;
        }

        .lesson-content h2 {
            color: var(--primary);
            margin-top: 30px;
            margin-bottom: 15px;
        }

        .lesson-content h3 {
            margin-top: 20px;
            margin-bottom: 10px;
        }

        .lesson-content p {
            margin-bottom: 15px;
            line-height: 1.8;
        }

        .lesson-content ul, .lesson-content ol {
            margin-left: 25px;
            margin-bottom: 15px;
        }

        .lesson-content li {
            margin-bottom: 8px;
            line-height: 1.6;
        }

        .lesson-content code {
            background: var(--bg-dark);
            padding: 2px 8px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            color: #7dd3fc;
        }

        .lesson-content pre {
            background: var(--bg-dark);
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 20px 0;
            border: 1px solid var(--border);
        }

        .lesson-content pre code {
            background: none;
            padding: 0;
            color: #e0e7ff;
        }

        .complete-btn {
            background: var(--success);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            margin-top: 30px;
            transition: all 0.3s;
        }

        .complete-btn:hover {
            background: #059669;
            transform: translateY(-2px);
        }

        /* Stats Dashboard */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: var(--bg-card);
            padding: 24px;
            border-radius: 12px;
            border: 1px solid var(--border);
            text-align: center;
        }

        .stat-value {
            font-size: 2.5rem;
            font-weight: bold;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .stat-label {
            color: var(--text-secondary);
            margin-top: 8px;
        }

        /* Graph Styles */
        .node {
            cursor: pointer;
            transition: all 0.3s;
        }

        .node circle {
            stroke-width: 3px;
            transition: all 0.3s;
        }

        .node:hover circle {
            r: 35;
            stroke-width: 4px;
        }

        .node text {
            font-size: 12px;
            fill: white;
            text-anchor: middle;
            pointer-events: none;
        }

        .link {
            stroke: #475569;
            stroke-width: 2px;
            stroke-opacity: 0.6;
        }

        .link.active {
            stroke: var(--primary);
            stroke-width: 3px;
            stroke-opacity: 1;
        }

        /* Responsive */
        @media (max-width: 768px) {
            h1 { font-size: 1.3rem; }
            .paths-grid { grid-template-columns: 1fr; }
            .lessons-grid { grid-template-columns: 1fr; }
            .modal-content { padding: 20px; }
        }
    </style>
</head>
<body>
    <header>
        <div class="header-content">
            <h1>üéì Decentralized AI Academy</h1>
            <div class="controls">
                <button class="btn" id="lang-btn" onclick="toggleLanguage()">üá∑üá∫ RU</button>
                <button class="btn" onclick="resetProgress()">üîÑ –°–±—Ä–æ—Å</button>
            </div>
        </div>
    </header>

    <div class="container">
        <!-- Tabs -->
        <div class="tabs">
            <button class="tab active" onclick="showTab('dashboard')">üìä –î–∞—à–±–æ—Ä–¥</button>
            <button class="tab" onclick="showTab('graph')">üåê –ì—Ä–∞—Ñ –∑–Ω–∞–Ω–∏–π</button>
            <button class="tab" onclick="showTab('paths')">üìö –¢—Ä–∞–µ–∫—Ç–æ—Ä–∏–∏</button>
            <button class="tab" onclick="showTab('lessons')">üìñ –£—Ä–æ–∫–∏</button>
        </div>

        <!-- Dashboard Tab -->
        <div id="tab-dashboard" class="tab-content active">
            <h2 style="margin-bottom: 20px;">üìä –í–∞—à –ø—Ä–æ–≥—Ä–µ—Å—Å</h2>
            <div class="stats-grid" id="stats-grid"></div>

            <h2 style="margin: 30px 0 20px 0;">üöÄ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Å–ª–µ–¥—É—é—â–∏–π —à–∞–≥</h2>
            <div id="next-lesson"></div>
        </div>

        <!-- Graph Tab -->
        <div id="tab-graph" class="tab-content">
            <h2 style="margin-bottom: 20px;">üåê –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –≥—Ä–∞—Ñ –∑–Ω–∞–Ω–∏–π</h2>
            <div id="knowledge-graph">
                <svg id="graph-svg"></svg>
            </div>
        </div>

        <!-- Paths Tab -->
        <div id="tab-paths" class="tab-content">
            <h2 style="margin-bottom: 20px;">üìö –¢—Ä–∞–µ–∫—Ç–æ—Ä–∏–∏ –æ–±—É—á–µ–Ω–∏—è</h2>
            <div class="paths-grid" id="paths-container"></div>
        </div>

        <!-- Lessons Tab -->
        <div id="tab-lessons" class="tab-content">
            <h2 style="margin-bottom: 20px;">üìñ –í—Å–µ —É—Ä–æ–∫–∏ (10 –ø–æ–ª–Ω—ã—Ö —É—Ä–æ–∫–æ–≤)</h2>
            <div class="lessons-grid" id="lessons-container"></div>
        </div>
    </div>

    <!-- Lesson Modal -->
    <div class="modal" id="lesson-modal">
        <div class="modal-content">
            <button class="close-btn" onclick="closeLesson()">√ó</button>
            <div id="lesson-body"></div>
            <button class="complete-btn" onclick="markComplete()">‚úÖ –û—Ç–º–µ—Ç–∏—Ç—å –∫–∞–∫ –ø—Ä–æ–π–¥–µ–Ω–Ω—ã–π</button>
        </div>
    </div>

    <script>
        // State
        let currentLang = localStorage.getItem('lang') || 'ru';
        let currentLesson = null;
        let completedLessons = JSON.parse(localStorage.getItem('completed') || '[]');

        // Data - —Å–æ–∫—Ä–∞—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏
        const data = {
            paths: [
                {
                    id: 'beginner',
                    icon: 'üå±',
                    title: { ru: '–ü—É—Ç—å –Ω–æ–≤–∏—á–∫–∞', en: 'Beginner Path' },
                    desc: { ru: '–û—Å–Ω–æ–≤—ã —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ –ò–ò - 4 —É—Ä–æ–∫–∞', en: 'Distributed AI Fundamentals - 4 lessons' },
                    difficulty: 'beginner',
                    duration: { ru: '8 —á–∞—Å–æ–≤', en: '8 hours' },
                    lessons: [1, 2, 3, 4]
                },
                {
                    id: 'intermediate',
                    icon: 'üöÄ',
                    title: { ru: '–ü—É—Ç—å –ø—Ä–∞–∫—Ç–∏–∫–∞', en: 'Practitioner Path' },
                    desc: { ru: '–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤ - 3 —É—Ä–æ–∫–∞', en: 'Algorithm Implementation - 3 lessons' },
                    difficulty: 'intermediate',
                    duration: { ru: '12 —á–∞—Å–æ–≤', en: '12 hours' },
                    lessons: [5, 6, 7]
                },
                {
                    id: 'advanced',
                    icon: '‚ö°',
                    title: { ru: '–ü—É—Ç—å —ç–∫—Å–ø–µ—Ä—Ç–∞', en: 'Expert Path' },
                    desc: { ru: 'Production –¥–µ–ø–ª–æ–π - 3 —É—Ä–æ–∫–∞', en: 'Production Deployment - 3 lessons' },
                    difficulty: 'advanced',
                    duration: { ru: '16 —á–∞—Å–æ–≤', en: '16 hours' },
                    lessons: [8, 9, 10]
                }
            ],

            lessons: [
                { id: 1, title: { ru: '–ß—Ç–æ —Ç–∞–∫–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π –ò–ò?', en: 'What is Distributed AI?' }, difficulty: 'beginner', duration: { ru: '1.5 —á', en: '1.5 h' } },
                { id: 2, title: { ru: '–†–æ–µ–≤–æ–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç', en: 'Swarm Intelligence' }, difficulty: 'beginner', duration: { ru: '2 —á', en: '2 h' } },
                { id: 3, title: { ru: '–ú–Ω–æ–≥–æ–∞–≥–µ–Ω—Ç–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã', en: 'Multi-Agent Systems' }, difficulty: 'beginner', duration: { ru: '2 —á', en: '2 h' } },
                { id: 4, title: { ru: '–§–µ–¥–µ—Ä–∞—Ç–∏–≤–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ', en: 'Federated Learning' }, difficulty: 'intermediate', duration: { ru: '2.5 —á', en: '2.5 h' } },
                { id: 5, title: { ru: '–†–µ–∞–ª–∏–∑–∞—Ü–∏—è FedAvg —Å PyTorch', en: 'FedAvg with PyTorch' }, difficulty: 'intermediate', duration: { ru: '3 —á', en: '3 h' } },
                { id: 6, title: { ru: 'Ray: –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è', en: 'Ray: Distributed Computing' }, difficulty: 'intermediate', duration: { ru: '3 —á', en: '3 h' } },
                { id: 7, title: { ru: 'DeepSpeed –∏ vLLM', en: 'DeepSpeed and vLLM' }, difficulty: 'intermediate', duration: { ru: '3 —á', en: '3 h' } },
                { id: 8, title: { ru: 'Production: Ray Cluster', en: 'Production: Ray Cluster' }, difficulty: 'advanced', duration: { ru: '4 —á', en: '4 h' } },
                { id: 9, title: { ru: 'Monitoring –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ', en: 'Monitoring and Scaling' }, difficulty: 'advanced', duration: { ru: '4 —á', en: '4 h' } },
                { id: 10, title: { ru: '–§–∏–Ω–∞–ª—å–Ω—ã–π –ø—Ä–æ–µ–∫—Ç', en: 'Final Project' }, difficulty: 'advanced', duration: { ru: '8 —á', en: '8 h' } }
            ],

            graph: {
                nodes: [
                    { id: 1, label: { ru: '–í–≤–µ–¥–µ–Ω–∏–µ', en: 'Intro' }, x: 0, y: 0, color: '#667eea' },
                    { id: 2, label: { ru: '–†–æ–µ–≤–æ–π –ò–ò', en: 'Swarm' }, x: -150, y: 100, color: '#10b981' },
                    { id: 3, label: { ru: '–ê–≥–µ–Ω—Ç—ã', en: 'Agents' }, x: 150, y: 100, color: '#f59e0b' },
                    { id: 4, label: { ru: 'FedLearning', en: 'FedLearning' }, x: 0, y: 200, color: '#ec4899' },
                    { id: 5, label: { ru: 'PyTorch', en: 'PyTorch' }, x: -100, y: 300, color: '#8b5cf6' },
                    { id: 6, label: { ru: 'Ray', en: 'Ray' }, x: 100, y: 300, color: '#06b6d4' },
                    { id: 7, label: { ru: '–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è', en: 'Optimization' }, x: 0, y: 400, color: '#f59e0b' },
                    { id: 8, label: { ru: '–î–µ–ø–ª–æ–π', en: 'Deploy' }, x: -100, y: 500, color: '#ef4444' },
                    { id: 9, label: { ru: '–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥', en: 'Monitoring' }, x: 100, y: 500, color: '#10b981' },
                    { id: 10, label: { ru: '–ü—Ä–æ–µ–∫—Ç', en: 'Project' }, x: 0, y: 600, color: '#8b5cf6' }
                ],
                links: [
                    { source: 1, target: 2 }, { source: 1, target: 3 }, { source: 2, target: 4 },
                    { source: 3, target: 4 }, { source: 4, target: 5 }, { source: 4, target: 6 },
                    { source: 5, target: 7 }, { source: 6, target: 7 }, { source: 7, target: 8 },
                    { source: 7, target: 9 }, { source: 8, target: 10 }, { source: 9, target: 10 }
                ]
            }
        };

        // Helper functions
        function t(obj) {
            return typeof obj === 'object' ? obj[currentLang] : obj;
        }

        function toggleLanguage() {
            currentLang = currentLang === 'ru' ? 'en' : 'ru';
            localStorage.setItem('lang', currentLang);
            document.getElementById('lang-btn').textContent = currentLang === 'ru' ? 'üá∑üá∫ RU' : 'üá¨üáß EN';
            render();
        }

        function showTab(tab) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(tc => tc.classList.remove('active'));

            event.target.classList.add('active');
            document.getElementById(`tab-${tab}`).classList.add('active');

            if (tab === 'graph') {
                setTimeout(initGraph, 100);
            }
        }

        function resetProgress() {
            if (confirm(currentLang === 'ru' ? '–°–±—Ä–æ—Å–∏—Ç—å –≤–µ—Å—å –ø—Ä–æ–≥—Ä–µ—Å—Å?' : 'Reset all progress?')) {
                completedLessons = [];
                localStorage.setItem('completed', JSON.stringify(completedLessons));
                render();
            }
        }

        // Rendering
        function renderStats() {
            const total = data.lessons.length;
            const completed = completedLessons.length;
            const percentage = Math.round((completed / total) * 100);

            const stats = [
                { value: `${completed}/${total}`, label: currentLang === 'ru' ? '–£—Ä–æ–∫–æ–≤ –ø—Ä–æ–π–¥–µ–Ω–æ' : 'Lessons Completed' },
                { value: `${percentage}%`, label: currentLang === 'ru' ? '–ü—Ä–æ–≥—Ä–µ—Å—Å' : 'Progress' },
                { value: total - completed, label: currentLang === 'ru' ? '–û—Å—Ç–∞–ª–æ—Å—å' : 'Remaining' },
                { value: Math.floor(completed / 3), label: currentLang === 'ru' ? '–¢—Ä–∞–µ–∫—Ç–æ—Ä–∏–π –∑–∞–≤–µ—Ä—à–µ–Ω–æ' : 'Paths Completed' }
            ];

            document.getElementById('stats-grid').innerHTML = stats.map(s => `
                <div class="stat-card">
                    <div class="stat-value">${s.value}</div>
                    <div class="stat-label">${s.label}</div>
                </div>
            `).join('');

            // Next lesson recommendation
            const nextLesson = data.lessons.find(l => !completedLessons.includes(l.id));
            if (nextLesson) {
                document.getElementById('next-lesson').innerHTML = `
                    <div class="lesson-card" onclick="openLesson(${nextLesson.id})">
                        <span class="lesson-number">${currentLang === 'ru' ? '–£—Ä–æ–∫' : 'Lesson'} ${nextLesson.id}</span>
                        <h3 class="lesson-title">${t(nextLesson.title)}</h3>
                        <div class="lesson-meta">
                            <span class="meta-badge">${nextLesson.difficulty}</span>
                            <span class="meta-badge">‚è±Ô∏è ${t(nextLesson.duration)}</span>
                        </div>
                    </div>
                `;
            } else {
                document.getElementById('next-lesson').innerHTML = `
                    <div class="path-card">
                        <h3>üéâ ${currentLang === 'ru' ? '–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã –ø—Ä–æ—à–ª–∏ –≤—Å–µ —É—Ä–æ–∫–∏!' : 'Congratulations! All lessons completed!'}</h3>
                    </div>
                `;
            }
        }

        function renderPaths() {
            document.getElementById('paths-container').innerHTML = data.paths.map(path => {
                const pathCompleted = path.lessons.filter(lid => completedLessons.includes(lid)).length;
                const pathProgress = Math.round((pathCompleted / path.lessons.length) * 100);

                return `
                    <div class="path-card">
                        <div class="path-header">
                            <span class="path-icon">${path.icon}</span>
                            <span class="path-difficulty difficulty-${path.difficulty}">${path.difficulty}</span>
                        </div>
                        <div class="path-title">${t(path.title)}</div>
                        <div class="path-desc">${t(path.desc)}</div>
                        <div class="path-meta">
                            <span>‚è±Ô∏è ${t(path.duration)}</span>
                            <span class="path-progress">${pathProgress}%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${pathProgress}%"></div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function renderLessons() {
            document.getElementById('lessons-container').innerHTML = data.lessons.map(lesson => {
                const completed = completedLessons.includes(lesson.id);
                return `
                    <div class="lesson-card ${completed ? 'completed' : ''}" onclick="openLesson(${lesson.id})">
                        <span class="lesson-number">${currentLang === 'ru' ? '–£—Ä–æ–∫' : 'Lesson'} ${lesson.id}</span>
                        <div class="lesson-title">${t(lesson.title)}</div>
                        <div class="lesson-meta">
                            <span class="meta-badge">${lesson.difficulty}</span>
                            <span class="meta-badge">‚è±Ô∏è ${t(lesson.duration)}</span>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function initGraph() {
            const container = document.getElementById('knowledge-graph');
            const svg = d3.select('#graph-svg');
            svg.selectAll('*').remove();

            const width = container.clientWidth - 40;
            const height = container.clientHeight - 40;

            const g = svg.append('g')
                .attr('transform', `translate(${width/2}, 50)`);

            // Links
            const links = g.selectAll('.link')
                .data(data.graph.links)
                .enter().append('line')
                .attr('class', 'link')
                .attr('x1', d => data.graph.nodes.find(n => n.id === d.source).x)
                .attr('y1', d => data.graph.nodes.find(n => n.id === d.source).y)
                .attr('x2', d => data.graph.nodes.find(n => n.id === d.target).x)
                .attr('y2', d => data.graph.nodes.find(n => n.id === d.target).y);

            // Nodes
            const nodes = g.selectAll('.node')
                .data(data.graph.nodes)
                .enter().append('g')
                .attr('class', 'node')
                .attr('transform', d => `translate(${d.x}, ${d.y})`)
                .on('click', (event, d) => openLesson(d.id));

            nodes.append('circle')
                .attr('r', 30)
                .attr('fill', d => completedLessons.includes(d.id) ? '#10b981' : d.color)
                .attr('stroke', d => completedLessons.includes(d.id) ? '#fff' : '#1e293b');

            nodes.append('text')
                .attr('dy', 5)
                .text(d => t(d.label));

            // Zoom
            const zoom = d3.zoom()
                .scaleExtent([0.5, 3])
                .on('zoom', (event) => {
                    g.attr('transform', event.transform);
                });

            svg.call(zoom);
        }

        function openLesson(id) {
            currentLesson = id;
            const lesson = data.lessons.find(l => l.id === id);

            document.getElementById('lesson-body').innerHTML = `
                <h1>${currentLang === 'ru' ? '–£—Ä–æ–∫' : 'Lesson'} ${id}: ${t(lesson.title)}</h1>
                <div class="lesson-meta" style="margin: 20px 0;">
                    <span class="meta-badge">${lesson.difficulty}</span>
                    <span class="meta-badge">‚è±Ô∏è ${t(lesson.duration)}</span>
                </div>
                <div class="lesson-content">
                    <p>${currentLang === 'ru' ? '–ü–æ–ª–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —É—Ä–æ–∫–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–∑ app.js. –≠—Ç–∞ –¥–µ–º–æ-–≤–µ—Ä—Å–∏—è –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã.' : 'Full lesson content is loaded from app.js. This demo shows the platform structure.'}</p>
                    <h2>${currentLang === 'ru' ? '–¶–µ–ª–∏ —É—Ä–æ–∫–∞' : 'Learning Objectives'}</h2>
                    <ul>
                        <li>${currentLang === 'ru' ? '–û—Å–≤–æ–∏—Ç—å –∫–ª—é—á–µ–≤—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏' : 'Master key concepts'}</li>
                        <li>${currentLang === 'ru' ? '–ü–æ–ª—É—á–∏—Ç—å –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –Ω–∞–≤—ã–∫–∏' : 'Gain practical skills'}</li>
                        <li>${currentLang === 'ru' ? '–ü—Ä–∏–º–µ–Ω–∏—Ç—å –∑–Ω–∞–Ω–∏—è –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ' : 'Apply knowledge in practice'}</li>
                    </ul>
                </div>
            `;

            document.getElementById('lesson-modal').classList.add('active');
        }

        function closeLesson() {
            document.getElementById('lesson-modal').classList.remove('active');
        }

        function markComplete() {
            if (currentLesson && !completedLessons.includes(currentLesson)) {
                completedLessons.push(currentLesson);
                localStorage.setItem('completed', JSON.stringify(completedLessons));
                alert(currentLang === 'ru' ? '‚úÖ –£—Ä–æ–∫ –æ—Ç–º–µ—á–µ–Ω –∫–∞–∫ –ø—Ä–æ–π–¥–µ–Ω–Ω—ã–π!' : '‚úÖ Lesson marked as completed!');
                closeLesson();
                render();
            }
        }

        function render() {
            renderStats();
            renderPaths();
            renderLessons();
        }

        // Initialize
        document.getElementById('lang-btn').textContent = currentLang === 'ru' ? 'üá∑üá∫ RU' : 'üá¨üáß EN';
        render();
    </script>
</body>
</html>
